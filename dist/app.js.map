{"version":3,"sources":["webpack:///./src/index.js"],"names":["ThemesDemoApp","_classCallCheck","this","selectedDevice","options","defaultSelectedDevice","window","KW_DEMO_CONFIG","fullscreen","backURL","logoURL","logoImg","ctaURL","ctaText","url","themeUrl","container","qrcode","devices","mobile_small","name","size","menuClass","gaCategory","gaAction","gaLabel","mobile_small_landscape","mobile","mobile_landscape","tablet","tablet_landscape","themes","selectDevice","changeSize","bindEvents","_this","menuLink","document","querySelectorAll","_loop","button","i","addEventListener","onMenuClick","event","preventDefault","length","getElementById","slug","target","value","theme","contentWindow","href","src","device","dataset","refreshView","frame","querySelector","classList","remove","style","width","height","add","selectMenu","innerHTML","render","menuLinks","console","log","map","link","renderFullHeader","renderMenu","renderIframe","_options","_this2","key","icon","join","renderThemeChoose","renderQRcode","labelText"],"mappings":"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","file":"app.js","sourcesContent":["import { map } from 'lodash';\nimport './style.css';\n\nclass ThemesDemoApp {\n    constructor() {\n        this.selectedDevice = null;\n\n        this.options = {\n            defaultSelectedDevice: \n                (window.KW_DEMO_CONFIG.defaultSelectedDevice && window.KW_DEMO_CONFIG.fullscreen)\n                ? window.KW_DEMO_CONFIG.defaultSelectedDevice \n                : 'mobile_small',\n\n            fullscreen: window.KW_DEMO_CONFIG.fullscreen || false,\n\n            backURL: window.KW_DEMO_CONFIG.backURL || false,\n            logoURL: window.KW_DEMO_CONFIG.logoURL || false,\n            logoImg: window.KW_DEMO_CONFIG.logoImg || false,\n            ctaURL: window.KW_DEMO_CONFIG.ctaURL || false,\n            ctaText: window.KW_DEMO_CONFIG.ctaText || false,\n\n            url: window.KW_DEMO_CONFIG.themeUrl || '',\n            container: window.KW_DEMO_CONFIG.container || '#kk-demo-app',\n            qrcode: window.KW_DEMO_CONFIG.qrcode || '',\n            devices: window.KW_DEMO_CONFIG.devices || {\n                mobile_small: {\n                    name: 'Mobile Small',\n                    size: [320, 480],\n                    menuClass: 'kk-mobile',\n                    gaCategory: 'preview-change',\n                    gaAction: 'click',\n                    gaLabel: 'Mobile Small',\n                },\n                mobile_small_landscape: {\n                    name: 'Mobile Small Landscape',\n                    size: [480, 320],\n                    menuClass: 'kk-mobile-landscape',\n                    gaCategory: 'preview-change',\n                    gaAction: 'click',\n                    gaLabel: 'Mobile Small Landscape',\n                },\n                mobile: {\n                    name: 'Mobile',\n                    size: [375, 667],\n                    menuClass: 'kk-mobile',\n                    gaCategory: 'preview-change',\n                    gaAction: 'click',\n                    gaLabel: 'Mobile',\n                },\n                mobile_landscape: {\n                    name: 'Mobile Landscape',\n                    size: [667, 375],\n                    menuClass: 'kk-mobile-landscape',\n                    gaCategory: 'preview-change',\n                    gaAction: 'click',\n                    gaLabel: 'Mobile Landscape',\n                },\n                tablet: {\n                    name: 'Tablet',\n                    size: [768, 1024],\n                    menuClass: 'kk-tablet',\n                    gaCategory: 'preview-change',\n                    gaAction: 'click',\n                    gaLabel: 'Tablet',\n                },\n                tablet_landscape: {\n                    name: 'Tablet Landscape',\n                    size: [1024, 768],\n                    menuClass: 'kk-tablet-landscape',\n                    gaCategory: 'preview-change',\n                    gaAction: 'click',\n                    gaLabel: 'Tablet Landscape',\n                },\n            },\n            themes: window.KW_DEMO_CONFIG.themes || [],\n        };\n\n        this.selectDevice(this.options.defaultSelectedDevice);\n        this.changeSize();\n    }\n\n    bindEvents() {\n        const menuLink = document.querySelectorAll('.kk-demo__devices-select a');\n\n        for (var i = 0; i < menuLink.length; i++) {\n            const button = menuLink[i];\n\n            button.addEventListener('click', () => {\n                this.onMenuClick(button);\n                event.preventDefault();\n            });\n        }\n\n        if (this.options.themes && !!this.options.themes.length) {\n            document.getElementById('kk-demo-theme-change').\n                addEventListener('change', (event) => {\n                    const slug = event.target.value;\n                    const frame = document.getElementById('kk-demo-frame');\n                    const theme = frame.contentWindow.document.getElementById(\n                        'theme-style');\n\n                    if (!slug) {\n                        theme.href = null;\n                        return false;\n                    }\n\n                    theme.href = `assets/themes/${event.target.value}/style.css`;\n                });\n        }\n\n        // document.getElementById('kk-demo-load-template').\n        // addEventListener('click', (event) => {\n        const frame = document.getElementById('kk-demo-frame');\n        frame.src = this.options.url;\n\n        // document.getElementById('kk-demo-load-template').remove();\n        // });\n    }\n\n    onMenuClick(button) {\n        const { device } = button.dataset;\n\n        this.selectedDevice = device;\n        this.changeSize();\n    }\n\n    selectDevice(device) {\n        this.selectedDevice = device;\n        this.refreshView();\n        this.bindEvents();\n    }\n\n    changeSize() {\n        const frame = document.querySelector('#kk-demo-frame');\n\n        if (this.selectedDevice === 'desktop') {\n            document.querySelector('.kk-demo__device').classList.remove('kk-demo__device--phone');\n\n            frame.style.width = '100vw';\n            frame.style.height = '100vh';\n        } else {\n            document.querySelector('.kk-demo__device').classList.add('kk-demo__device--phone');\n\n            frame.style.width = this.options.devices[this.selectedDevice].size[0] + 'px';\n            frame.style.height = this.options.devices[this.selectedDevice].size[1] + 'px';\n        }\n\n        this.selectMenu();\n    }\n\n    refreshView() {\n        const container = document.querySelector(this.options.container);\n\n        container.innerHTML = this.render();\n        this.selectMenu();\n    }\n\n    selectMenu() {\n        const menuLinks = document.querySelectorAll(\n            this.options.container + ' .kk-demo__header a');\n\n        console.log(this.selectedDevice);\n\n        map(menuLinks, (link) => {\n            link.classList.remove('active');\n        });\n\n        const selected = document.querySelector(\n            this.options.container + ' .kk-demo__header a[data-device=\"' +\n            this.selectedDevice + '\"]');\n\n        selected.classList.add('active');\n    }\n\n    render() {\n        const { fullscreen } = this.options;\n\n        if (!this.selectedDevice) {\n            return (`<div>Loading...</div>`);\n        }\n\n        return (`\n            <div class=\"kk-demo__container ${fullscreen ? 'fullscreen' : ''}\">\n                <div class=\"kk-demo__header\">\n                    ${fullscreen ? this.renderFullHeader() : this.renderMenu()}\n                </div>\n                <div class=\"kk-demo__iframe-container\">\n                    ${this.renderIframe()}     \n                </div>\n            </div>\n        `);\n    }\n\n    renderFullHeader() {\n        const { backURL, logoImg, logoURL, ctaURL, ctaText } = this.options;\n\n        return (`\n            <div class=\"kk-demo__header-bar\">\n                <div class=\"kk-demo__header-bar--back kk-demo__button-box\">\n                    ${backURL ? (`\n                        <a href=\"${backURL}\">\n                            <span>\n                                <svg viewBox=\"0 0 32 32\" width=\"1em\" height=\"1em\">\n                                    <path \n                                        d=\"M12.586 27.414l-10-10a2 2 0 0 1 0-2.828l10-10a2 2 0 1 1 \n                                        2.828 2.828L8.828 14H28a2 2 0 1 1 0 4H8.828l6.586 6.586c.39.39.586.902.586 \n                                        1.414s-.195 1.024-.586 1.414a2 2 0 0 1-2.828 0z\" \n                                    />\n                                </svg>\n                            </span>\n                        </a>\n                    `) : ''}\n                </div>\n                <div class=\"kk-demo__header-bar--logo\">\n                    ${logoImg ? (`\n                        <a href=\"${logoURL || '/'}\">\n                            <img src=\"${logoImg}\" alt=\"Website Logo\" />\n                        </a>\n                    `) : ''}\n                </div>\n                <div class=\"kk-demo__header-bar--menu\">\n                    ${this.renderMenu()}\n                </div>\n                <div class=\"kk-demo__header-bar--button kk-demo__button-box\">\n                    ${ctaURL ? (`\n                        <a href=\"${ctaURL}\" class=\"primary\">\n                            <span>\n                                ${ctaText}\n                            </span>\n                        </a>\n                    `) : ''}\n                </div>\n            </div>\n        `);\n    }\n\n    renderMenu() {\n        const links = map(this.options.devices, (device, key) => {\n            let icon = '';\n\n            switch (key) {\n                case 'mobile_small':\n                    icon = `\n                        <svg viewBox=\"0 0 32 32\">\n                            <path d=\"M23 0h-14c-1.65 0-3 1.35-3 3v26c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-26c0-1.65-1.35-3-3-3zM12 1.5h8v1h-8v-1zM16 30c-1.105 0-2-0.895-2-2s0.895-2 2-2 2 0.895 2 2-0.895 2-2 2zM24 24h-16v-20h16v20z\"></path>\n                        </svg>\n                    `;\n                    break;\n            \n                case 'mobile':\n                    icon = `\n                        <svg viewBox=\"0 0 32 32\">\n                            <path d=\"M24 0h-18c-1.1 0-2 0.9-2 2v28c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-28c0-1.1-0.9-2-2-2zM15 30.556c-0.859 0-1.556-0.697-1.556-1.556s0.697-1.556 1.556-1.556 1.556 0.697 1.556 1.556-0.697 1.556-1.556 1.556zM24 26h-18v-22h18v22z\"></path>\n                        </svg>\n                    `;\n                    break;\n\n                case 'tablet':\n                    icon = `\n                        <svg viewBox=\"0 0 32 32\">\n                            <path d=\"M25 0h-20c-1.65 0-3 1.35-3 3v26c0 1.65 1.35 3 3 3h20c1.65 0 3-1.35 3-3v-26c0-1.65-1.35-3-3-3zM15 31c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM24 28h-18v-24h18v24z\"></path>\n                        </svg>\n                    `;\n                    break;\n\n                default:\n                    break;\n            }\n\n            return key === 'desktop' && !this.options.fullscreen ? null : (`\n                <li>\n                    <a\n                        href=\"#\"\n                        data-device=\"${key}\"\n                        class=\"kk-demo__button ${device.menuClass}\"\n                        data-vars-ga-category=\"${device.gaCategory}\"\n                        data-vars-ga-action=\"${device.gaAction}\"\n                        data-vars-ga-label=\"${device.gaLabel}\"\n                    >\n                        ${icon} <span>${device.name}</span>\n                    </a>\n                </li>\n            `);\n        }).join('');\n\n        return (`\n            <span>Select device: </span>\n            <ul class=\"kk-demo__devices-select\">${links}</ul>\n            ${this.renderThemeChoose()}\n        `);\n    }\n\n    renderQRcode() {\n        return (`\n            <div class=\"kk-demo__qrcode\">\n                <div>Check on your phone!</div>\n                <img src=\"${this.options.qrcode}\">\n            </div>\n        `);\n    }\n\n    renderIframe() {\n        return (`\n            <div class=\"kk-demo__device\">\n                ${this.options.qrcode ? this.renderQRcode() : ''}\n                <iframe\n                    id=\"kk-demo-frame\"\n                    src=\"\"\n                    frameborder=\"0\"\n                ></iframe>\n            </div>\n        `);\n    }\n\n    renderThemeChoose() {\n        if (!this.options.themes || !this.options.themes.length) {\n            return ('');\n        }\n\n        const labelText = `<span>Select theme:</span>`;\n        const options = map(this.options.themes, (theme) => {\n            return (`<option value=\"${theme.slug}\">${theme.name}</option>`);\n        }).join('');\n\n        return (`${labelText} <select id=\"kk-demo-theme-change\">${options}</select>`);\n    }\n}\n\nnew ThemesDemoApp();\n"],"sourceRoot":""}